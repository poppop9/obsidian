---
tags:
  - 计算机/数据库
---
# 🌕数据类型
### 🌗数值
##### 🌑整数类型
| 数值类型    |大小 |有符号范围【默认】|无符号范围|
| ------------ | ------ | ------------------ | ---------------------- |
| TINYINT      |1 字节| -128 到 127                                 | 0 到 255                                  |
| SMALLINT     | 2 字节 | -32,768 到 32,767                           | 0 到 65,535                               |
| MEDIUMINT    | 3 字节 | -8,388,608 到 8,388,607                     | 0 到 16,777,215                           |
| INT          | 4 字节 | -2,147,483,648 到 2,147,483,647             | 0 到 4,294,967,295                         |
| BIGINT       | 8 字节 | -9,223,372,036,854,775,808 到 9,223,372,036,854,775,807 | 0 到 18,446,744,073,709,551,615           |
从上到下为：小整数--->大整数
##### 🌑浮点数类型
| 数值类型    |大小|有符号范围|无符号范围|
| ------------ | ------ | ------------------ | ---------------------- |
| FLOAT        |4字节|-3.402823466E+38 到 -1.175494351E-38，<br> 0 和 1.175494351E-38 到 3.402823466E+38| -3.402823466E+38 到 -1.175494351E-38、0 和 1.175494351E-38 到 3.402823466E+38 |
| DOUBLE       |8字节|-1.7976931348623157E+308 到 -2.2250738585072014E-308、0 和 2.2250738585072014E-308 到 1.7976931348623157E+308 | -1.7976931348623157E+308 到 -2.2250738585072014E-308、0 和 2.2250738585072014E-308 到 1.7976931348623157E+308 |
| DECIMAL      |可变长度|依赖于指定的精度和范围 | 依赖于指定的精度和范围                     |
从上到下为：单精度浮点数，双精度浮点数，精确定点数【避免精度损失】
##### 🌑布尔类型
| 数值类型    |大小|有符号范围|无符号范围|
| ------------ | ------ | ------------------ | ---------------------- |
|BOOL/BOOLEAN| 1 字节 | 无符号范围不适用   | 无符号范围不适用     |
### 🌗字符串
- `CHAR`：定长字符串。范围为 0 到 255 字符。***性能比varchar好***
	- 比如`char(10)`，表示最多存10个字符，不足10个字符，也占用10个字符的空间
- `VARCHAR`：变长字符串。范围为 0 到 65,535 字符
	- `varchar(10)`，表示最多存10个字符，不足10个字符，会按照实际长度存储

- `TINYTEXT`：可变长度字符串。范围为 0 到 255 字节
- `TEXT`：可变长度字符串。范围为 0 到 65,535 字节
- `MEDIUMTEXT`：可变长度字符串。范围为 0 到 16,777,215 字节
- `LONGTEXT`：可变长度字符串。范围为 0 到 4,294,967,295 字节
- `BINARY`：固定长度二进制字符串。范围为 0 到 255 字节
- `VARBINARY`：可变长度二进制字符串。范围为 0 到 65,535 字节
- `TINYBLOB`：可变长度二进制字符串，范围为 0 到 255 字节。***可用于存储视频，音频***
- `BLOB`：可变长度二进制字符串。范围为 0 到 65,535 字节
- `MEDIUMBLOB`：可变长度二进制字符串。范围为 0 到 16,777,215 字节
- `LONGBLOB`：可变长度二进制字符串。范围为 0 到 4,294,967,295 字节
- `ENUM`：枚举类型，存储从预定义值列表中选择的一个字符串。可根据枚举值的数量进行大小和范围的计算
- `SET`：集合类型，存储从预定义值列表中选择的一个或多个字符串。可根据集合值的数量进行大小和范围的计算
- `JSON`：存储 JSON 格式的数据，最大长度为 4,294,967,295 字符





### 🌗日期时间

# 🌕DDL
>Data Definition Language 数据库定义语言
### 🌗数据库操作
- ***查询***
	- `SHOW DATABASES;`  查询所有数据库
	- `SELECT DATABASE();`  查询当前正在使用的数据库
- ***创建***
	```sql
	CREATE DATABASE  
	    [IF NOT EXISTS]      /*中括号表示可选项*/
	    数据库名  
	    [CHARACTER SET 字符集名]
	    [COLLATE 排序规则];
	```
- ***使用***
	- `USE 数据库名;`  切换到某个数据库
- ***删除***
	- `DROP DATABASE [IF EXISTS] 数据库名;`  删除某个数据库
### 🌗表的操作
- ***查询***
	- `SHOW TABLES;`  查询当前数据库所有的表
	- `DESC 表名;`  查询表结构
	- `SHOW CREATE TABLE 表名;`  查询建表语句
- ***创建***
```sql
CREATE TABLE 表名(
	字段1 字段类型 [约束] [COMMENT 注释],
	字段2 字段类型 [约束] [COMMENT 注释],
	字段3 字段类型 [约束] [COMMENT 注释],
	…………
	字段n 字段类型 [约束] [COMMENT 注释]
)[COMMENT 表注释]
```
- ***修改***
- ***删除***


# 🌕DML
>Data Manipulation Language 数据库操作语言

字符串和日期时间类型都需要包含在`引号''`内


















# 🌕DQL
>Data Query Language 数据查询语言



# 🌕DCL
>Data Control Language 数据库控制语言
# 🌕函数
### 🌗日期函数
`now()`  获取当前的系统时间
```sql
insert into customer(update_time)  
values (now());
```


# 🌕约束
>约束是处理数据库的规则

- `NOT NULL`  非空约束：限制字段不能为NULL
- `UNIQUE`  唯一约束：保证字段所有数据唯一
- `PRIMARY KEY`  主键约束
- `FOREIGN KEY`  外键约束
- `DEFAULT`  默认值约束：如果未指定字段的值，则采用默认值
### 🌗主键
>主键是用于唯一标识数据库表中每一行数据的***字段/字段组合***
##### 🌑对于主键的约束
- 每个表都需要有主键【因为这便于以后的数据操作和管理】
- 主键列不允许`null值`
- 包含主键值的列从不修改或更新
- 主键值不能重用【***如果从表中删除某一行，其主键值不分配给新行***】

```sql
CREATE TABLE Vendors  
(                          //并且还定义了该字段不能为空
    vend_id      CHAR(10) NOT NULL PRIMARY KEY auto increment, //定义了vend_id字段为主键
    vend_name    CHAR(50) NOT NULL,             //此属性可以自动自增该字段的值
    vend_address CHAR(50) NULL
);
```

```sql
ALTER TABLE Vendors  //表示需要修改的表是Vendors
    ADD CONSTRAINT PRIMARY KEY (vend_id);     //给该表添加一个主键 vend_id
```
### 🌗外键



### 🌗额外
在每个表中都需要指定三个基础字段，一个是主键ID，一个是创建时间，一个是更新时间

一般存储性别时，不直接存储男/女，一般存储int类型的数据，因为在前端可能需要渲染展示男士，女士等







# 🌕问题处理
>[!faq] 如果要为表的主键添加auto increment属性，这个表的主键被作为了其他表的外键，每个表中都有数据，我不想数据丢失，那我该怎么办？

- 在表中添加一个新的自增长主键列，而不删除现有的主键列
	```
	ALTER TABLE customer ADD COLUMN NewID INT AUTO_INCREMENT PRIMARY KEY FIRST;
	```
- 将现有的主键列的值复制到新的主键列中
	```sql
	UPDATE customer SET NewID = CustomerID;
	```
- 对于引用了表主键的其他表，更新它们的外键引用，将其指向新的主键列 "NewID"
	```sql
	ALTER TABLE other_table ADD CONSTRAINT fk_customer_id FOREIGN KEY (customer_id) REFERENCES customer (NewID);
	```
- 删除旧的主键列
	```sql
	ALTER TABLE customer DROP COLUMN CustomerID;
	```
- 最后将“NewID”设置为主键

