# 介绍
- ***图形界面***：Linux 发行版上看到的图形界面都只是运行在 Linux 系统之上的一套软件，跟 windows 完全不同

---

Linux 默认提供了 6 个纯命令行界面的终端让用户登录。在物理机系统上你可以通过使用`[Ctrl]`+`[Alt]`+`[F1]～[F6]`进行切换，当你切换到其中一个终端后想要切换回图形界面，你可以按下`[Ctrl]`+`[Alt]`+`[F7]`来完成

---

linux 的哲学：没有结果就是最好的结果

# 快捷键

| 按键              | 作用                                                                        |
| --------------- | ------------------------------------------------------------------------- |
| `Tab`           | 补全<u>命令</u>，<u>命令参数</u>，<u>目录</u>【当忘记某个命令的全称时可以只输入它的开头的一部分，然后使用 `Tab` 补全】 |
| `Ctrl+c`        | 强行终止当前程序【使用在<u>光标在闪烁却无法继续输入命令</u>，或者<u>不停地输出一大堆你不想要的结果</u>】               |
| `Ctrl+d`        | 键盘输入结束或退出终端                                                               |
| `Ctrl+s`        | 暂停当前程序，暂停后按下任意键恢复运行                                                       |
| `Ctrl+z`        | 将当前程序放到后台运行，恢复到前台为命令`fg`                                                  |
| `Ctrl+a`        | 将光标移至输入行头，相当于`Home`键                                                      |
| `Ctrl+e`        | 将光标移至输入行末，相当于`End`键                                                       |
| `Ctrl+k`        | 删除从光标所在位置到行末                                                              |
| `Alt+Backspace` | 向前删除一个单词                                                                  |
| `Shift+PgUp`    | 将终端显示向上滚动                                                                 |
| `Shift+PgDn`    | 将终端显示向下滚动                                                                 |
| `↑`             | 恢复之前的命令                                                                   |

>[!hint] 当你看到终端没有任何反应或提示，也不能接受输入时，可能只是运行的程序需要等一下，先不要急着按 `Ctrl+c`

## 通配符
>通配符用来对字符串进行模糊匹配

| 字符                      | 含义                              |
| ----------------------- | ------------------------------- |
| `*`                     | 匹配 0 或多个字符                      |
| `?`                     | 匹配任意一个字符                        |
| `[list]`                | 匹配 list 中的任意单一字符                |
| `[^list]`               | 匹配 除 list 中的任意单一字符以外的字符         |
| `[c1-c2]`               | 匹配 c1-c2 中的任意单一字符 如：[0-9][a-z]  |
| `{string1,string2,...}` | 匹配 string1 或 string2 (或更多)其一字符串 |
| `{c1..c2}`              | 匹配 c1-c2 中全部字符 如{1..10}         |

```bash
ls *.txt 
查找多个 `.txt` 后缀的文件

touch love_{1..10}_shiyanlou.txt 
一次性创建多个文件【 `love1linux.txt`，`love2linux.txt`，... ，`love10linux.txt`】
```

# 权限
## 用户
>[!hint] 什么是 `root` 账户 ？
>`root` 是 Linux 和 UNIX 系统中的超级管理员用户帐户，拥有整个系统至高无上的权限【新建，添加用户】

大部分 Linux 系统在安装时都会建议用户新建一个用户，而不是直接使用 root 用户进行登录

### who 命令

| 参数   | 说明                                                          |
| ---- | ----------------------------------------------------------- |
| `-m` | 查看当前用户。如果没有输出用户名，可以在 shell 里设置 <u>在命令启动时更新 utmp/wtmp 记录</u> |
| `-a` | 打印能打印的全部                                                    |
| `-d` | 打印死掉的进程                                                     |
| `-q` | 打印当前登录用户数及用户名                                               |
| `-u` | 打印当前登录用户登录信息                                                |
| `-r` | 打印运行等级                                                      |

>[!hint] `who -m` 与 `whoami` 的区别
>- `who -m` 显示当前登录用户的信息
>- `whoami` 显示当前执行命令的用户的用户名

### 创建，登录，退登
>[!warning] 使用 `sudo` 命令的两个前提
> - 你要知道当前登录用户的密码
> - 当前用户必须在 `sudo` 用户组

`su <user>` 可以切换到用户 user，执行时需要输入目标用户的密码
`sudo <cmd>` 可以以特权级别运行 cmd 命令【暂时获得 `root` 权限】，需要当前用户属于 sudo 组，且需要输入当前用户的密码
`su - <user>` 命令也是切换用户，但是同时用户的环境变量和工作目录也会跟着改变成目标用户所对应的

---

- 创建用户【用户名为  `lilei`】
```bash
sudo adduser lilei
```

- 为新用户在 /home 目录下创建一个工作目录
```bash
ls /home
```

- 切换登录用户
```bash
su -l lilei
```

- 打印当前工作目录的路径
```bash
pwd
```

- 使用 `exit` 命令退出当前用户

---

>[!hint] `adduser` 和 `useradd` 的区别是什么
>- `useradd` 只创建用户，不会创建用户密码和工作目录，创建完了需要手动使用 `passwd <username>` 去设置新用户的密码，<u>更像是一种命令</u>
>- `adduser` 在创建用户时，会创建工作目录和密码，做这一系列的操作。<u>更像是一种程序</u>，需要你输入、确定等一系列操作

### 删除用户
```bash
// 将lilei用户删除，--remove-home是删除用户时会一并将该用户的工作目录
sudo deluser lilei --remove-home
```


## 用户组
>每个用户都有一个用户组，用户组里的用户共享一些资源和权限，同时拥有私有资源

- 一个用户可以属于多个用户组
- 默认情况下新创建的用户不在 `sudo` 用户组【也就不具有 `root` 权限】
- 新建用户如果不指定用户组的话，默认会自动创建一个与用户名相同的用户组

---

### 查看当前用户组
```bash
groups 用户名
```

### 添加用户到用户组
>[!hint] 使用 `usermod` 命令必需有 root 权限【可以<u>直接使用 root 用户</u>，或者用在 <u>sudo 用户组的用户使用 sudo 命令</u>获取权限】

```bash
// 将lilei添加到 sudo 用户组
sudo usermod -G sudo lilei
```

### 删除用户组
```
sudo groupdel 用户名
```

## 文件
>在 Unix/Linux 中的每一个文件或目录都包含<u>访问权限</u>【决定谁能访问和如何访问】，***Linux 里面一切皆文件***

>[!hint] 文件的详细信息
>![](https://obsidian-1307744200.cos.ap-guangzhou.myqcloud.com/%E5%9B%BE%E7%89%87/202403101054357.png)

>[!warning] 以 `.` 开头的文件都是隐藏文件
### ls 命令
| 参数        | 描述                      |
| --------- | ----------------------- |
| `-l`      | 以长格式显示文件和目录的详细信息        |
| `-a`      | 显示所有文件和目录【***包括隐藏文件***】 |
| `-h`      | 以可读的格式显示文件大小            |
| `-d`      | 仅显示目录本身，不显示其内容          |
| `-S`      | 按文件大小排序，从大到小显示文件和目录     |
| `-r`      | 反向排序，以逆序显示文件和目录         |
| `-t`      | 按修改时间排序，最新修改的文件或目录显示在前面 |
| `-R`      | 递归地显示子目录和文件             |
| `-i`      | 显示文件的 inode 号           |
| `--color` | 以彩色形式显示不同类型的文件          |

```bash
ls -l

---
lrwxrwxrwx 1 root root 14 3月 10 02:37 anaconda3 -> /opt/anaconda3 
drwxr-xr-x 2 shiyanlou shiyanlou 4096 1月 6 2021 Code 
drwxr-xr-x 2 shiyanlou shiyanlou 4096 1月 6 2021 Desktop 
```

```bash
// 以长格式，按文件的大小排序，以可读的方式，显示所有所有文件和目录
ls -aShl   

---
-rw-r--r-- 1 shiyanlou shiyanlou 6.3K 1月 6 2021 .vimrc
-rw-r--r-- 1 shiyanlou shiyanlou 4.2K 3月 10 05:00 .zshrc 
```

### 文件类型
- 设备文件：`/dev` 目录下有各种设备文件，大都跟具体的硬件设备相关
- `socket`：网络套接字
- `pipe`： 管道
- `软链接`：软链接等同于 Windows 上的快捷方式，另一种是“硬链接”
- ***目录***：<u>目录是一种特殊类型的文件</u>，目录 = 目录文件 = 文件数据 + 文件列表信息 + 文件名 + 文件的 inode 号 + ……

>[!hint] Linux 上不是通过文件后缀名来区分文件的类型

### 文件权限
>[!hint] 当你想打开一个目录并查看其内部的文件时，该目录必须同时具有<u>读权限</u>和<u>执行权限</u>
>
>- 读权限：允许你读取<u>目录的内容</u>【查看目录中的文件列表和相关信息】
>- 执行权限：允许你进入目录并访问其内部的文件

>[!hint] 文件的权限有三种：所有者，所属用户组，其他用户

- 修改文件权限【`g` 表示 group，`o` 表示 others，`u` 表示 user。用 `+/-` 来修改】
```bash
cd ……/testdir
chmod go-rw iphone11  // group，others同时减去r权限，和w权限
```

### 链接数
>链接到该文件所在的 inode 结点的文件名数目

### 所有者
- 更改所有者
```bash
cd ……/testdir
sudo chown shiyanlou testdir
```

# 目录结构
>[!hint] Linux 目录与 Windows 目录
>- Windows 一直是以存储介质为主的，主要以盘符及分区来实现文件管理，然后之下才是目录。文件可以放置在任何目录中
>- Linux 是以目录为主的，是以<u>树形目录结构</u>【用户可操作系统的骨架】的形式来构建整个系统的。从逻辑上来说 Linux 的磁盘是挂载在目录上的，每一个目录不仅能使用本地磁盘分区的文件系统，也可以使用网络上的文件系统【~~虽然本质上目录结构还是存储在磁盘上的~~】【例如可以将一个磁盘分区挂载到`/home`目录上，用于存储用户的个人文件；将另一个磁盘分区挂载到`/var`目录上，用于存储系统日志和变量数据；还可以通过挂载网络文件系统，将远程服务器的文件挂载到本地目录中，方便共享和访问】

## FHS
> FHS 是文件系统层次结构标准，定义了系统中每个区域的用途、所需要的最小构成的文件和目录，还给出了例外处理与矛盾处理

![](https://obsidian-1307744200.cos.ap-guangzhou.myqcloud.com/%E5%9B%BE%E7%89%87/202403101725600.png)

---

***FHS 的两层规范***：
- 第一层是 `/` 下面的各个目录应该要放什么文件数据【例如 `/etc` 应该放置设置文件，`/bin` 与 `/sbin` 应该放置可执行文件……】
- 第二层是针对 `/usr` ， `/var` 的子目录来定义【 `/var/log` 放置系统日志文件，`/usr/share` 放置共享数据……】

---

FHS 依据<u>文件系统使用的频繁程度</u>，<u>是否允许用户随意改动</u>，将目录分为四种交互作用的形态：
![此处输入图片的描述](https://doc.shiyanlou.com/document-uid18510labid59timestamp1482919171956.png)

## 基础操作
### 获取当前目录
>使用 `pwd` 命令可以获取当前的绝对路径

### 切换目录
>使用 `cd` 命令

- 参数
	- `.` 表示当前目录【`ls .` 表示列出当前目录的文件】
	- `..` 表示上一级目录【`cd ..` 表示进入上一级目录】
	- `-` 表示上一次所在目录【`cd -` 表示进入上一次所在的目录】
	- `～` 表示当前用户的 `home` 目录下的 `用户目录`【`cd ~` 将进入用户目录】

```bash
# 绝对路径
cd /usr/local/bin
# 相对路径，现在在/home/shiyanlou
cd ../../usr/local/bin
# 相对路径，现在在/usr下，要进入到/bin下
cd ./local/bin
```

### 创建目录
>使用 `mkdir` 命令【“~~make directory~~”】

| 参数   | 描述                       |
| ---- | ------------------------ |
| `-p` | ~~parent~~，创建目录时，同时创建父目录 |

```bash
mkdir -p ./father/son/grandson
```

>[!warning] 如果当前目录有 `test` 文件，则无法创建 `test` 目录

>[!hint] 如果当前目录存在 `test` 目录，则创建 `test` 文件时，会更改 `test` 目录的时间戳，而不是创建文件

### 创建文件
>>使用 `touch` 命令
> - `touch` 命令添加参数
> 	- 可以<u>更改已有文件的时间戳</u>【最近访问时间，最近修改时间】
> - 不加参数，只指定一个文件名
> 	- 可以创建一个指定文件名的空白文件【~~当然你也可以同时指定该文件的时间戳~~】

```bash
touch /opt/forloutest
```

### 复制文件，目录
>使用 `cp` 命令【~~copy~~】

| 参数   | 描述                                  |
| ---- | ----------------------------------- |
| `-r` | ~~recursive~~，***复制目录时使用***，表示要递归复制 |

---

- 复制文件
```bash
# 将之前创建的 `test` 文件复制到 `/home/shiyanlou/father/son/grandson` 目录中
cp test father/son/grandson
```

- 复制目录
```bash
# 将father里的son目录，复制到family目录里
cp -r father/son family
```

### 删除文件，目录
>使用 `rm` 命令【~~remove~~】

| 参数   | 描述                          |
| ---- | --------------------------- |
| `-f` | ~~force~~，当删除只读文件遇到阻碍时，强制删除 |
| `-r` | ***删除目录时使用***               |

---

- 删除文件
```bash
rm test
```

- 删除目录
```bash
rm -r test
```

### 移动，重命名文件
>`mv` 命令【~~move~~】，`mv 源文件 目的目录`

- 移动文件
```bash
# 将文件 file1 移动到 documents 目录里
mv file1 documents
```

- 重命名文件
```bash
# 将 file1 重命名为 file11
mv file1 file11
```

#### 批量重命名文件
>使用 `rename` 命令

>[!hint] `rename` 命令<u>不是内置命令</u>，若提示无该命令，可以使用 `sudo apt-get install rename` 命令安装

`rename` 命令要用 perl 正则表达式来作为参数

```bash
cd /home/shiyanlou/

# 使用通配符批量创建 5 个文件
touch file{1..5}.txt

# 批量将这 5 个后缀为 .txt 的文本文件重命名为以 .c 为后缀的文件:
rename 's/\.txt/\.c/' *.txt

# 批量将这 5 个文件，文件名和后缀改为大写:
rename 'y/a-z/A-Z/' *.c
```

### 查看文件
- `cat` 命令【~~concatenate~~】：***正序打印***文件内容到终端
	- `-n` ~~number~~，会显示行号
```bash
cat file
cat -n file
```

---

- `tac` 命令【~~`cat` 的倒序~~】：***倒序***【从最后一行向上打印】打印文件到终端

---

- `nl` 命令【~~number lines~~】
	- `-b`：指定添加行号的方式
	    - `-b a`：表示无论是否为空行，同样列出行号【`cat -n` 的方式】
	    - `-b t`：只列出非空行的编号并列出【默认】
	- `-n`：设置行号的样式
	    - `-n ln`：在行号字段最左端显示
	    - `-n rn`：在行号字段最右边显示，且不加 0
	    - `-n rz`：在行号字段最右边显示，且加 0
	- `-w`：行号字段占用的位数【默认为 6 位】

```bash
nl -b a -n rz -w 3 file
```

>[!quote] 标准输入输出
> 当我们执行一个 shell 命令行时通常会自动打开三个标准文件【<u>标准输入文件</u>，<u>标准输出文件</u>，<u>标准错误输出文件</u>】
> 
> 进程将从标准输入文件中得到输入数据，将正常输出数据输出到标准输出文件，而将错误信息送到标准错误文件中

### fen
#### 使用 `more` 和 `less` 命令分页查看文件

如果说上面的 `cat` 是用来快速查看一个文件的内容的，那么这个 `more` 和 `less` 就是天生用来"阅读"一个文件的内容的，比如说 man 手册内部就是使用的 `less` 来显示内容。其中 `more` 命令比较简单，只能向一个方向滚动，而 `less` 为基于 `more` 和 `vi` （一个强大的编辑器，我们有单独的课程来让你学习）开发，功能更强大。`less` 的使用基本和 `more` 一致，具体使用请查看 man 手册，这里只介绍 `more` 命令的使用。

使用 `more` 命令打开 `passwd` 文件：

```bash
more passwd
```

![4-3.5-3](https://doc.shiyanlou.com/document-uid735639labid59timestamp1531734202525.png)

打开后默认只显示一屏内容，终端底部显示当前阅读的进度。可以使用 `Enter` 键向下滚动一行，使用 `Space` 键向下滚动一屏，按下 `h` 显示帮助，`q` 退出。

#### 使用 `head` 和 `tail` 命令查看文件

这两个命令，那些性子比较急的人应该会喜欢，因为它们一个是只查看文件的头几行（默认为 10 行，不足 10 行则显示全部）和尾几行。还是拿 passwd 文件举例，比如当我们想要查看最近新增加的用户，那么我们可以查看这个 `/etc/passwd` 文件，不过我们前面也看到了，这个文件里面一大堆乱糟糟的东西，看起来实在费神啊。因为系统新增加一个用户，会将用户的信息添加到 passwd 文件的最后，那么这时候我们就可以使用 `tail` 命令了：

```bash
tail /etc/passwd
```

甚至更直接的只看一行， 加上 `-n` 参数，后面紧跟行数：

```bash
tail -n 1 /etc/passwd
```

![4-3.5-4](https://doc.shiyanlou.com/document-uid735639labid59timestamp1531734226305.png)

关于 `tail` 命令，不得不提的还有它一个很牛的参数 `-f`，这个参数可以实现不停地读取某个文件的内容并显示。这可以让我们动态查看日志，达到实时监视的目的。不过我不会在这门基础课程中介绍它的更多细节，感兴趣的用户可以自己去了解。

下一步








