
>[!hint] è®¾è®¡æ¨¡å¼å¯ä»¥è®©æ”¹ä»£ç ï¼Œç»´æŠ¤ä»£ç æ›´åŠ ç®€å•

>[!hint] ç†è®ºè¦ç»“åˆå®é™…ï¼Œè¦åœ¨å®é™…åœºæ™¯ä¸‹èŠè®¾è®¡æ¨¡å¼ï¼Œæœ‰äº›è®¾è®¡æ¨¡å¼æ˜¯äº’æ–¥çš„

- å·¥å‚æ–¹æ³•
- æŠ½è±¡å·¥å‚
- ç”Ÿæˆå™¨
- åŸå‹
- å•ä¾‹

# â¤ï¸ å·¥å‚æ¨¡å¼
- **æœªä½¿ç”¨å·¥å‚æ¨¡å¼**ï¼Œ~~ä½¿ç”¨ if â€¦ else â€¦ ç»“æ„~~
```java
public class Circle {
    public void Draw() { sout("Drawing a Circle"); }
}

public class Rectangle {
    public void Draw() { sout("Drawing a Rectangle"); }
}

public class Client {
    public void DrawShape(string shapeType) {
        if (shapeType == "Circle") {
            Circle circle = new Circle();
            circle.Draw();
        } else if (shapeType == "Rectangle") {
            Rectangle rectangle = new Rectangle();
            rectangle.Draw();
        } else {
            throw new ArgumentException("Invalid shape type");
        }
    }
}

// ä½¿ç”¨
psvm {
	Client client = new Client();
	client.DrawShape("Circle");
	client.DrawShape("Rectangle");
}
```

## ğŸ’› ç®€å•å·¥å‚æ¨¡å¼
```mermaid
graph LR
	subgraph æŠ½è±¡äº§å“
	    b[å…·ä½“äº§å“1]
	    c[å…·ä½“äº§å“2]
	    d[â€¦â€¦]
    end

	e[ä½¿ç”¨è€…]--åˆ›å»º-->a
	a[å®ä½“å·¥å‚]--ç”Ÿäº§-->æŠ½è±¡äº§å“
```

- äº§å“
```java
// æŠ½è±¡äº§å“
public interface IShape { void Draw(); }

// å…·ä½“äº§å“ç±»
public class Circle {
    public void Draw() { sout("Drawing a Circle"); }
}

public class Rectangle {
    public void Draw() { sout("Drawing a Rectangle"); }
}
```

- å·¥å‚
```java
// å·¥å‚ç±»
public class ShapeFactory {
	// ç»´æŠ¤äº†ä¸€ä¸ªmapé›†åˆï¼Œä»£æ›¿äº†ifâ€¦â€¦elseâ€¦â€¦
    private Map<String, IShape> shapeMap = new HashMap<>();

    public ShapeFactory() {
        shapeMap.put("Circle", new Circle());
        shapeMap.put("Rectangle", new Rectangle());
    }

    public IShape CreateShape(String shapeType) {
        IShape shape = shapeMap.get(shapeType);
        if (shape == null) {
            throw new IllegalArgumentException("Invalid shape type");
        }
        return shape;
    }
}
```

- æµ‹è¯•
```java
ShapeFactory shapeFactory = new ShapeFactory();

IShape1 = shapeFactory.CreateShape("Circle")
IShape1.Draw();

IShape2 = shapeFactory.CreateShape("Rectangle")
IShape2.Draw();
```

## ğŸ’› å·¥å‚æ–¹æ³•æ¨¡å¼
```mermaid
graph LR
	subgraph æŠ½è±¡å·¥å‚
		b[å·¥å‚1]
		c[å·¥å‚2]
		d[å·¥å‚3]
    end

	a[ä½¿ç”¨è€…]--æ ¹æ®ä½ è¦ç”Ÿäº§çš„äº§å“ï¼Œåˆ›å»ºå¯¹åº”çš„å·¥å‚-->æŠ½è±¡å·¥å‚
	b--åˆ›å»º-->äº§å“1
	c--åˆ›å»º-->äº§å“2
	d--åˆ›å»º-->äº§å“3
```

```java
// æŠ½è±¡äº§å“
public interface IShape { void Draw(); }

// å…·ä½“äº§å“ç±»
public class Circle implements IShape {
    public void Draw() { sout("Drawing a Circle"); }
}

public class Rectangle implements IShape {
    public void Draw() { sout("Drawing a Rectangle"); }
}

// æŠ½è±¡å·¥å‚
public abstract class ShapeFactory {
    public abstract Shape createShape();
}

// å…·ä½“å·¥å‚
public class CircleFactory extends ShapeFactory {
    @Override
    public Shape createShape() { return new Circle(); }
}

public class RectangleFactory extends ShapeFactory {
    @Override
    public Shape createShape() { return new Rectangle(); }
}

// å®¢æˆ·ç«¯ä»£ç 
public class Client {
    public void DrawShape(ShapeFactory shapeFactory) {
        IShape shape = shapeFactory.createShape();
        shape.Draw();
    }
}

// ä½¿ç”¨
Client client1 = new Client();

client1.DrawShape(new CircleFactory());
client2.DrawShape(new RectangleFactory());
```

## ğŸ’› æŠ½è±¡å·¥å‚æ¨¡å¼
```mermaid
graph LR
	a[ä½¿ç”¨è€…]--æ ¹æ®ä½ è¦ç”Ÿäº§çš„äº§å“ï¼Œåˆ›å»ºå¯¹åº”çš„å·¥å‚-->æŠ½è±¡å·¥å‚

	subgraph æŠ½è±¡å·¥å‚
		b[å·¥å‚1]
		c[å·¥å‚2]
    end

	b--åˆ›å»º-->æŠ½è±¡äº§å“1

	subgraph æŠ½è±¡äº§å“1
		e[å…·ä½“äº§å“1]
		f[å…·ä½“äº§å“2]
    end

	c--åˆ›å»º-->æŠ½è±¡äº§å“2
	
	subgraph æŠ½è±¡äº§å“2
		g[å…·ä½“äº§å“3]
		h[å…·ä½“äº§å“4]
    end
```

- äº§å“
```java
// æŠ½è±¡äº§å“ï¼šå½¢çŠ¶æ¥å£
interface Shape {
    void draw();
}

// å…·ä½“äº§å“ï¼šåœ†å½¢
class Circle implements Shape {
    public void draw() {
        System.out.println("Inside Circle::draw() method.");
    }
}

// å…·ä½“äº§å“ï¼šçŸ©å½¢
class Rectangle implements Shape {
    public void draw() {
        System.out.println("Inside Rectangle::draw() method.");
    }
}
```

- å·¥å‚
```java
// æŠ½è±¡å·¥å‚ï¼šå½¢çŠ¶å·¥å‚æ¥å£
interface ShapeFactory {
    Shape getShape();
}

// å…·ä½“å·¥å‚ï¼šåœ†å½¢å·¥å‚
class CircleFactory implements ShapeFactory {
	// è¿”å›æŠ½è±¡äº§å“
    public Shape getShape() {
        return new Circle();
    }
}

// å…·ä½“å·¥å‚ï¼šçŸ©å½¢å·¥å‚
class RectangleFactory implements ShapeFactory {
	// è¿”å›æŠ½è±¡äº§å“
    public Shape getShape() {
        return new Rectangle();
    }
}
```

- æµ‹è¯•
```java
// å®¢æˆ·ç«¯ä»£ç 
public class FactoryPatternDemo {
    public static void main(String[] args) {
	    // åˆ›å»ºæŠ½è±¡å·¥å‚
        ShapeFactory shapeFactory = null;

        // ä½¿ç”¨åœ†å½¢å·¥å‚
        shapeFactory = new CircleFactory();
        Shape shape1 = shapeFactory.getShape();
        shape1.draw();

        // ä½¿ç”¨çŸ©å½¢å·¥å‚
        shapeFactory = new RectangleFactory();
        Shape shape2 = shapeFactory.getShape();
        shape2.draw();
    }
}
```

# â¤ï¸ å»ºé€ è€…æ¨¡å¼
>[!quote] å»ºé€ è€…æ¨¡å¼
>å»ºé€ è€…æ¨¡å¼ å°±æ˜¯é€šè¿‡å°†å¤šä¸ªç®€å•å¯¹è±¡ï¼Œ<u>é€šè¿‡ä¸€æ­¥æ­¥çš„ç»„è£…</u>æ„å»ºå‡ºä¸€ä¸ªå¤æ‚å¯¹è±¡çš„è¿‡ç¨‹
>![500](https://s21.ax1x.com/2024/07/31/pkOWicD.png)






















