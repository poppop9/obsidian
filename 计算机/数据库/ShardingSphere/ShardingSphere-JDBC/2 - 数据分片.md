
>[!quote] 数据分片
>数据分片 是指按照某个维度，将放在单一数据库中的数据分散地存放到多个数据库
>
><u>数据分片的有效手段</u>：
>- 分库分表
>- 主从架构读写分离
>- 缓存
>- NoSQL 数据库 ：用来处理部分非关系型数据
>- 数据归档 ：对于历史数据，或不常用的数据，存储在独立的数据库中，减小主数据库的负担，确保只处理活跃数据

>[!warning] 尽量避免跨库事务

>[!hint] 如果一个系统可以预测将来数据量会很大，那么在一开始开发就可以上分库分表，因为技术已经成熟了
>- 单表行数不应该超过 500w 行
>- 单表容量不应该超过 2 GB
>- 单一数据库实例不应该超过 1TB

# 分库分表
<u>分库</u> ：
- 垂直分库：DB【表1，表2】 -- 按照业务模块来拆分 --> DB1【表1】，DB2【表2】
- 水平分库【~~使用更多~~】：DB【表1】 -- 按照某个范围拆分 --> DB1【表1】，DB2【表2】

<u>分表</u> ：
- 垂直分表：表1【10 字段，100w 数据】 -> 表1【5 字段，100w 数据】，表2【5 字段，100w 数据】
- 水平分表：表1【10 字段，100w 数据】-> 表1【10 字段，50w 数据】，表2【10 字段，50w 数据】

## 分表策略
>[!hint] 分表策略很重要 ! ! ! 策略用的不好，到时候很影响性能的，要结合业务场景来

- 哈希取模 ：数据 id 对表的总数进行取模，余数决定数据落在哪个表
	- 迁移麻烦
- 范围分表 ：规定哪个范围的数据落在哪张表
	- 无需数据迁移
	- 可能某张表的压力会很大

