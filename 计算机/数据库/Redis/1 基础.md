# 基本概念
>[!quote] Redis
>>Redis 是非关系性数据库，是<u>基于内存的</u>，<u>键值</u>数据存储系统，**所以性能非常高**，常用于数据库缓存，消息队列，会话存储 ……
>
>- **原子性操作**：Redis 的所有操作都是原子性的【意味着操作要么完全执行，要么完全不执行】，这种特性保证了数据的一致性和完整性
>- **持久化**：Redis 支持数据的持久化，可以将内存中的数据保存到磁盘中，以便在系统重启后恢复数据
>- **发布/订阅模式**：Redis 内置了发布/订阅模式，允许客户端之间通过消息传递进行通信
>- **主从复制**

>[!quote] 主从复制
> - **主节点**：主节点是原始的数据持有者，可以处理写操作和读操作。所有的写操作【新增，更新，删除】都会在主节点上执行，并且主节点会将这些写操作记录到一个日志中
> - **从节点**：从节点是主节点的复制品，它可以从主节点那里获取和复制数据。<u>从节点主要用于处理读操作，这样可以分担主节点的读取负载</u>。<u>从节点也可以作为数据的备份</u>，如果主节点出现问题，从节点可以立即接管主节点的角色，保证数据的可用性
> 
> >>从节点的复制过程是通过网络进行的：
> >- 首先，从节点会连接到主节点，并请求主节点发送其数据的副本
> >- 然后，主节点会将其数据发送给从节点
> > - 从节点接收并加载了主节点的数据后，就可以开始接收和处理读请求
> >- 后续，主节点会持续将其新的写操作日志发送给从节点，从节点会实时更新其数据

---

>[!hint] 单机与集群
>- **在单机的 Redis 服务器中**：你可以把数据存储在不同的"数据库"中，每个数据库都是隔离的，不可共享的
>- **当使用 Redis 集群时**：Redis 集群是由多台机器组成的，数据分散在这多台机器上，以便存储更多的数据，并且让数据处理速度更快。在这种情况下，每台机器上的 Redis 只能有一个"数据库"

---

>[!hint] 单机下的数据库
>Redis 默认支持 16 个数据库【可以通过配置文件支持更多，无上限】，客户端与 Redis 建立连接后会自动选择 0 号数据库，可以使用 `SELECT` 更换数据库
>
> ```bash
> # 选择 1 号数据库
> redis> SELECT 1
> OK
> ```
> - Redis 不支持自定义数据库的名字，每个数据库都以编号命名，开发者必须自己记录哪些数据库存储了哪些数据
> - Redis 不支持为每个数据库设置不同的访问密码

>[!warning] 一个 Redis 实例中的多个数据库不适宜存储不同应用程序的数据，不同的应用应该使用不同的 Redis 实例存储数据
> - 使用 0 号数据库存储 A 应用生产环境中的数据，1 号数据库存储 A 应用测试环境中的数据  ✅
> - 使用 0 号数据库存储 A 应用的数据，1 号数据库存储 B 应用的数据  ❌

# 安装配置
- 使用 Docker 安装 
```
docker run --name redis -d -v /myredis/conf:/usr/local/etc/redis -p 6379:6379 redis
```

- 连接
	- 使用命令行
		- 在本地运行：输入 `redis-cli` 即可使用命令行与 redis 进行通信
		- 在本地连接远程的 Redis 服务：`redis-cli -h 主机号 -p 端口号 -a 密码`
	- 使用 Redis 图形化界面工具 Redis InSight 连接
		- 添加数据库
		- 输入主机地址，端口号

![](https://obsidian-1307744200.cos.ap-guangzhou.myqcloud.com/%E5%9B%BE%E7%89%87/202404180051783.png)

# 基本命令
## SET，GET，DEL
>[!hint] 不同的数据结构，设置，获取命令会有差异

- `SET 键名 值名` 设置键值对
- `GET 键名` 根据键名，获取对应的值
- `DEL 键名` 根据键名，删除键值对

```bash
SET name redis
GET name
DEL name

---
"redis"
```

>[!warning] Redis 默认不支持中文，所以在设置值时，设置的中文，会在读取时展示二进制数据
>不过可以在进入 Redis 客户端时，指定 `--raw` 来显示数据的原始格式【`redis-cli --raw`】

## CONFIG
- **永久改变配置项**

配置项通常在 Redis 的配置文件 `redis.conf` 中定义，我们可以编辑这个文件来改变 Redis 服务器的行为，一旦保存更改并重启 Redis 服务器，新的配置就会永久生效

---

- **临时改变配置项**【只对当前的 Redis 服务器进程有效，如果服务器重启，这些变更就会丢失】

我们也可以使用 `CONFIG` 来查看，或临时设置<u>配置项</u>【用来设置和控制 Redis 服务器本身行为的参数，比如服务器的运行模式，端口号，数据持久化的方式，连接的客户端数量上限，密码认证 ……】

```bash
redis-cli

# 获取某个配置项
CONFIG GET loglevel

# 获取所有配置项
CONFIG GET *

# 临时修改某个配置项
CONFIG SET loglevel "notice"
```

# 设置密码
- 无密码时，客户端会直接连接到服务端，然后就可以输入各种命令
- 设置密码后，客户端连接到服务端时，会要求身份验证
```bash
redis 127.0.0.1:6379> AUTH 密码
OK

# 检测redis服务是否正在运行
redis 127.0.0.1:6379> PING
PONG
```

    1. `AUTH password`：这个命令用于验证密码是否正确。如果你的 Redis 服务设置了密码，你需要使用这个命令并提供正确的密码才能开始执行其他命令。
    
2. `ECHO message`：这个命令会打印你提供的字符串。这是一个用于调试和测试的命令，因为它可以让你看到 Redis 是如何解析你的输入的。
    
3. `PING`：这个命令用于检查 Redis 服务是否在运行。如果服务在运行，它会返回 `PONG`。
    
4. `QUIT`：这个命令会关闭你当前的连接。使用这个命令后，你需要重新连接到 Redis 服务才能再次执行命令。
    
5. `SELECT index`：Redis 支持多个数据库，这个命令可以让你切换到指定的数据库。索引 `index` 是一个介于 0 和（数据库数-1）之间的整数。默认情况下，每个 Redis 实例都有 16 个数据库。



























