>[!quote] 重定向
>重定向 就是将标准输出的数据重定向到一个文件中，**因为标准输出本身也是一个文件** `/dev/stdout`

- `>` 将标准输出导向一个文件
- `>>` 讲标准输出追加到一个文件

```bash
echo 'hello' > redirect
echo 'world' >> redirect
cat redirect

---
hello
world
```


Linux 默认提供了三个特殊设备，用于终端的显示和输出

|文件描述符|设备文件|说明|
|---|---|---|
|`0`|`/dev/stdin`|标准输入|
|`1`|`/dev/stdout`|标准输出|
|`2`|`/dev/stderr`|标准错误|

>[!quote] 文件描述符
>文件描述符 是一个索引值，指向内核为每一个进程所维护的该进程打开文件的记录表
>当程序打开一个现有文件或者创建一个新文件时，内核向进程返回一个文件描述符，文件描述符就像是一个指针，指向操作系统内存中的打开文件表，它帮助程序跟踪和管理打开的文件和数据流。

当程序需要访问操作系统的资源时，操作系统会为这些资源创建一个数据结构【操作系统需要管理和操作这些资源所需的信息】。文件描述符实际上就是这些数据结构在操作系统表中的索引值。

每当我们创建或打开一个文件，操作系统会创建一个文件描述符，并用这个文件描述符来访问和管理文件。文件描述符在形式上是一个非负整数，它是一个索引值，指向内核为每一个进程所维护的该进程打开文件的记录表。当程序打开一个现有文件或者创建一个新文件时，内核向进程返回一个文件描述符。这个文件描述符会被存储在进程的文件描述符表中，每一个进程都有一个这样的表。

  

当程序需要对文件进行操作，如读、写、关闭文件时，它会提供文件描述符给操作系统，操作系统会根据这个文件描述符找到对应的文件并进行操作。

  

因此，文件描述符就像是一个指针，指向操作系统内存中的打开文件表，它帮助程序跟踪和管理打开的文件和数据流。每个文件描述符都是独一无二的，可以被视为正在访问的文件的唯一标识。

我们可以这样使用这些文件描述符。例如默认使用终端的标准输入作为命令的输入和标准输出作为命令的输出：

```bash
cat # 按 Ctrl+C 退出
```

将 cat 的连续输出（heredoc 方式）重定向到一个文件：

```bash
mkdir Documents
cat > Documents/test.c <<EOF
#include <stdio.h>

int main()
{
    printf("hello world\n");
    return 0;
}

EOF
```

将一个文件作为命令的输入，标准输出作为命令的输出：

```bash
cat Documents/test.c
```

将 echo 命令通过管道传过来的数据作为 cat 命令的输入，将标准输出作为命令的输出：

```bash
echo 'hi' | cat
```

将 echo 命令的输出从默认的标准输出重定向到一个普通文件：

```bash
echo 'hello shiyanlou' > redirect
cat redirect
```

![此处输入图片的描述](https://doc.shiyanlou.com/document-uid735639labid346timestamp1532415296335.png)

初学者这里要注意不要将管道和重定向混淆，**管道默认是连接前一个命令的输出到下一个命令的输入**，而重定向通常是需要一个文件来建立两个命令的连接，你可以仔细体会一下上述第三个操作和最后两个操作的异同点。