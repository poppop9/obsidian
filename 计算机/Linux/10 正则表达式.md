>[!quote] 正则表达式
>正则表达式 是构成搜索模式的字符序列，可以使搜索更强大

# 模式
## 范围
- `[]` 字符集合
```
`[abc]` 查找方括号之间的任何字符
```

---

- `^` 排除
```
`[^abc]` 可以匹配 `plain` 中的 `plin`
```

---

- `-` 区间
```
`[0-9]` 查找任何从 0 至 9 的数字
```

---

- `()` 整体
```
`gr(a|e)y` 等价于 `gray|grey`
`(grand)?father` 匹配 `father` 和 `grandfather`
```

---

- `|` 选择
```
`(x|y)` 查找 x 或 y
```

## 量词
- `*` 表示前面的字符可以出现任意次，甚至不出现
```
`0*42` 可以匹配 42、042、0042、00042 ……
```


- `+` 表示前面的字符必须出现至少一次
```
`goo+gle` ，可以匹配 `gooogle` ，`goooogle` ……
```


- `?` 
```

```

- `n?` 表示前面的字符最多出现一次【例如 `colou?r` ，可以匹配 `color` 或者 `colour`】

>[!hint] 如果不加数量限定符则表示仅出现一次


下面列举一些常用的作为 PCRE 子集的适用于 `perl` 和 `python` 编程语言及 `grep` 或 `egrep` 的正则表达式匹配规则：

> PCRE（Perl Compatible Regular Expressions 中文含义：perl 语言兼容正则表达式）是一个用 C 语言编写的正则表达式函数库，由菲利普.海泽(Philip Hazel)编写。PCRE 是一个轻量级的函数库，比 Boost 之类的正则表达式库小得多。PCRE 十分易用，同时功能也很强大，性能超过了 POSIX 正则表达式库和一些经典的正则表达式库。

| 字符       | 描述                                                                                                                                                            |
| -------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `\`      | **将下一个字符标记为一个特殊字符、或一个原义字符。** 例如 `n` 匹配字符 `n`。`\n` 匹配一个换行符。序列 `\\` 匹配 `\` 而 `\(` 则匹配 `(`。                                                                      |
| `^`      | **匹配输入字符串的开始位置。**                                                                                                                                             |
| `$`      | **匹配输入字符串的结束位置。**                                                                                                                                             |
| `{n,m}`  | **最少匹配 n 次且最多匹配 m 次**。例如，`o{1,3}` 将匹配 `fooooood` 中的前三个 `o`。`o{0,1}` 等价于 `o?`                                                                                  |
| `?`      | 当该字符紧跟在任何一个其他限制符（`*`，`+`，`?`，`{n}`，`{n,}`，`{n,m}`）后面时，匹配模式是非贪婪的。非贪婪模式尽可能少的匹配所搜索的字符串，而默认的贪婪模式则尽可能多的匹配所搜索的字符串。例如，对于字符串 `oooo`，`o+?` 将匹配单个 `o`，而 `o+` 将匹配所有 `o`。 |
| `.`      | **匹配除 `\n` 之外的任何单个字符**。要匹配包括 `\n` 在内的任何字符，请使用类似 `(.｜\n)` 的模式。                                                                                                 |


#### 优先级
优先级为从上到下从左到右，依次降低：

| 运算符                              | 说明     |
| -------------------------------- | ------ |
| `\`                              | 转义符    |
| `()`，`(?:)`，`(?=)`，`[]`          | 括号和中括号 |
| `*`，`+`，`?`，`{n}`，`{n,}`，`{n,m}` | 限定符    |
| `^`，`$`，`\` 任何元字符                | 定位点和序列 |
| ｜                                | 选择     |


- [正则表达式 wiki](http://zh.wikipedia.org/wiki/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F)
- [几种正则表达式引擎的语法差异](http://www.greenend.org.uk/rjk/tech/regexp.html)
- [各语言各平台对正则表达式的支持](http://en.wikipedia.org/wiki/Comparison_of_regular_expression_engines)
