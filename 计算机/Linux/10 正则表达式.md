>[!quote] 正则表达式
>正则表达式 是构成搜索模式的字符序列，可以使搜索更强大

# 模式
## 范围
- `[]` 字符集合
```
`[abc]` 查找方括号之间的任何字符
```

---

- `^` 排除
```
`[^abc]` 可以匹配 `plain` 中的 `plin`
```

---

- `-` 区间
```
`[0-9]` 查找任何从 0 至 9 的数字
```

---

- `()` 整体
```
`gr(a|e)y` 等价于 `gray|grey`
`(grand)?father` 匹配 `father` 和 `grandfather`
```

---

- `|` 选择
```
`(x|y)` 查找 x 或 y
```

## 量词
>[!hint] 如果不加数量限定符则表示仅出现一次

---

- `*` 表示前面的字符可以出现任意次，甚至不出现
```
`0*42` 可以匹配 42、042、0042、00042 ……
```

---

- `+` 表示前面的字符必须出现至少一次
```
`goo+gle` ，可以匹配 `gooogle` ，`goooogle` ……
```

---

- `?` 表示前面的字符最多出现一次
```
`colou?r` ，可以匹配 `color` 或者 `colour`
```

---

- `{n,m}` 最少匹配 n 次，且最多匹配 m 次
```
`o{1,3}` 将匹配 `fooooood` 中的前三个 `o`
```

## 其他
- `\` 转义字符
```
`n` 匹配字符 `n`
`\n` 匹配一个换行符
`\\` 匹配 `\`
`\(` 匹配 `(`
```

---

- `^` 位于正则表达式的开始位置时，匹配输入字符串的开始位置
```
`^abc` 匹配所有以 "abc" 开头的字符串，"abc"、"abcdefg"、"abc123" ……
```

---

- `$` 位于正则表达式的结束位置时，匹配输入字符串的结束位置
```
`abc$` 匹配所有以 "abc" 结尾的字符串，"123abc"、"xyzabc"……
```

---

- `其他限制符?` 当 `?` 紧跟在任何一个其他限制符【`*`，`+`，`?`，`{n}`，`{n,}`，`{n,m}`】后面时，会使用**非贪婪的匹配模式**

>[!quote] 非贪婪模式
>>- **非贪婪模式**：尽可能少的匹配所搜索的字符串
>>- **贪婪模式**：尽可能多的匹配所搜索的字符串【默认】
>
>对于字符串 `oooo`：
>- `o+?` 将匹配单个 `o`
>- `o+` 将匹配所有 `o`

---

- `.` 匹配除 `\n` 之外的任何单个字符

>[!hint] 要匹配包括 `\n` 在内的任何字符，使用 `(.｜\n)`

## 特殊符号
- `[:alnum:]` 代表英文大小写字母及数字，亦即 0-9，A-Z，a-z
- `[:alpha:]` 代表任何英文大小写字母，亦即 A-Z，a-z
- `[:blank:]` 代表空白键与 [Tab] 按键两者
- `[:cntrl:]` 代表键盘上面的控制按键，亦即包括 CR，LF，Tab，Del...
- `[:digit:]` 代表数字而已，亦即 0-9
- `[:graph:]` 除了空白字节（空白键与 [Tab] 按键）外的其他所有按键
- `[:lower:]` 代表小写字母
- `[:print:]` 代表任何可以被列印出来的字符
- `[:punct:]` 代表标点符号（punctuation symbol），即："，'，?，!，;，:，#，$...
- `[:upper:]` 代表大写字母
- `[:space:]` 任何会产生空白的字符，包括空格键，[Tab]，CR 等等
- `[:xdigit:]` 代表 16 进位的数字类型，因此包括： 0-9，A-F，a-f 的数字与字节

```
# 将匹配所有的数字
echo '1234\nabcd' | grep '[[:digit:]]'
```

**注意**：之所以要使用特殊符号，是因为上面的 `[a-z]` 不是在所有情况下都管用，这还与主机当前的语系有关，即设置在 `LANG` 环境变量的值，`zh_CN.UTF-8` 的话 `[a-z]`，即为所有小写字母，其它语系可能是大小写交替的如，"a A b B...z Z"，`[a-z]` 中就可能包含大写字母。所以在使用 `[a-z]` 时请确保当前语系的影响，使用 `[:lower:]` 则不会有这个问题。



优先级为从上到下从左到右，依次降低：

| 运算符                              | 说明     |
| -------------------------------- | ------ |
| `\`                              | 转义符    |
| `()`，`(?:)`，`(?=)`，`[]`          | 括号和中括号 |
| `*`，`+`，`?`，`{n}`，`{n,}`，`{n,m}` | 限定符    |
| `^`，`$`，`\` 任何元字符                | 定位点和序列 |
| ｜                                | 选择     |







