#计算机/四大件 
# 网络的全貌
浏览器和Web服务器之间的交互却很简单，概括如下：
(1)浏览器向Web服务器发送请求；
(2)Web服务器根据请求向浏览器发送响应；

要实现应用程序之间的交互，我们需要一个能够在浏览器和Web服务器之间传递请求和响应的机制。网络是由很多计算机等设备相互连接组成的，因此在通信的过程中需要确定正确的通信对象，并将请求和响应发送给它们。请求和响应在传递的过程中可能会丢失或损坏【请求和响应本质都是电信号和光信号，这些信号可能会因收到杂音等干扰而损坏】。所以需要一种机制，无论遇到任何情况都能够将请求和响应准确无误地发送给对方。
这种机制是由操作系统中的网络控制软件，以及交换机、路由器等设备分工合作来实现的，它的基本思路是将数字信息分割成一个一个的小块，然后装入一些被称为“包”(Packet)的容器中来运送。大家可以这样理解：包相当于信件或者包裹，而交换机和路由器则相当于邮局或快递公司的分拣处理区。包的头部存有目的地等控制信息，通过许多交换机和路由器的接力，就可以根据控制信息对这些包进行分拣，然后将它们一步一步地搬运到目的地。
无论是家庭和公司里的局域网，还是外面的互联网，它们只是在规模上有所不同，基本的机制都是相同的。

前面介绍的这个负责搬运数字信息的机制，再加上浏览器和Web服务器这些网络应用程序，这两部分就组成了网络。

# Web浏览器
### 生成HTTP请求消息
![[Excalidraw/计算机/四大件/计算机网络 Draw.md#^group=VVmY6Z7i|700]]

###### URL

形如“http://”、“ftp://”、“file://”、“mailto://”等开头的链接，所以浏览器是一个具备多种客户端功能的综合性客户端软件，而URL的开头就是告诉浏览器使用其中哪种功能来访问相应的数据

`http://user:password@www.glasscom.com:80/dir/file1.htm`  --会包含服务器的域名，文件的路径
`ftp://user:password@ftp.glasscom.com:21/dir/file1.htm`
`file://localhost/c:/path/file1.zip`
`mailto:tone@glasscom.com`  --会包含收件人的邮件地址

***URL中还可能包含用户名，密码，端口号等信息***

- [ ] URL省略文件名
	- `http://www.lab.glasscom.com/dir/`---这种时候服务器就会访问`/dir/index.html`或`/dir/default.htm`
		
	- `http://www.lab.glasscom.com/`---这表示服务器会访问***根目录***
		
	- `http://www.lab.glasscom.com/`---这时会访问服务器根目录下的`index.html`或者`default.htm`文件
##### URL的解析
>生成HTTP请求之前需要对URL进行解析，确定Web服务器和文件名
>![[Excalidraw/计算机/四大件/计算机网络 Draw.md#^group=nSIrYw3N|730]]
##### 生成HTTP请求信息
![[Excalidraw/计算机/四大件/计算机网络 Draw.md#^group=dzfRQA4Y|900]]
***一条请求消息中只能写一条URI，如果要获取多个文件，必须对每个文件单独发送一条请求***
###### 方法
`GET`--获取URI指定的信息【如果URI是文件，则返回文件内容；如果URI是CGI程序，则返回输出结果】
`POST`--从客户端向服务端发送数据【一般用于发送<u>表单</u>[^1]中填写的数据】
`HEAD`--只从服务端返回消息头给客户端【用于获取文件最后更新时间等属性】
`OPTIONS`--用于通知或查询通信选项
`PUT`--替换URI指定的服务器上的文件，如果文件不存在，则创建该文件
`DELETE`--删除URI指定的服务器上的文件
`TRACE`--将服务器收到的请求行和头部直接返回给客户端【用于在使用代理的环境中检查改写请求】
`CONNECT`--使用代理传输加密消息
###### 消息头
- ***通用头***：适用于请求和响应消息的头字段
- ***请求头***：给请求消息添加附加消息
- ***响应头***：给响应消息添加附加消息
- ***实体头***：给消息体添加附加消息

[^1]:网页中的文本框，复选框等能够输入数据的部分
### 域名解析
>[!question] 为什么不直接在Web浏览器输入IP地址，还要域名干嘛？
>如果对方的服务器不使用虚拟主机的话，直接输入IP地址也是可以访问网页的。***但是对比于一串数字，域名更加好记啊***

>[!question] 那为什么不直接用域名来确定通信对象呢?
>IPv4地址只有32bit，域名是字符串占用内存太多，***增加服务器负担，效率低下***
###### ***TCP/IP***
TCP/IP就是由一些小的子网【由集线器连接起来的几台计算机】，通过路由器连接起来组成一个大的网络
![[Excalidraw/计算机/四大件/计算机网络 Draw.md#^group=E5YjsPvZ|540]]
发送者发出的消息首先经过子网中的***集线器A***，转发到距离发送者最近的***路由器A***上，接着这个***路由器A***会根据目的地的位置判断要传送的下一个***路由器B***【传送到下一个子网的***集线器B***，再到***路由器B***】……直到到达目的地
###### ***IP地址***
>在同一网络下可以唯一标识的标识号，表示***网络号***+***主机号***。例如`10.11.12.13`

但由于网络号和主机号的具体结构是不固定的，所以我们要引入***子网掩码***来区分
###### ***子网掩码***
>子网掩码表示网络号与主机号之间的边界

子网掩码的表示方式：
- 十进制加分隔号`10.11.12.13/255.255.255.0`
- 网络号比特数`10.11.12.13/24`
###### ***DNS服务器***
域名服务系统，将IP地址与域名进行关联


##### 通过解析器向DNS服务器发送查询信息
解析器实际上是一段程序，它包含在操作系统的`Socket库`【网络开发的标准库】中。解析器会生成查询消息，之后委托给操作系统内部的协议栈发送查询消息给DNS服务器

##### 接收DNS服务器返回的响应消息
##### 使用操作系统自带的解析器进行解析
解析得到IP地址后，将其写入到Web浏览器的内存地址中，后续浏览器向Web服务器发送消息时，只要从该内存地址取出IP地址，并将其和HTTP请求消息一起交给操作系统即可







### 全世界DNS服务器的大接力

### 委托协议栈发送消息

# 协议栈，网卡

# 集线器，交换机，路由器

# 接入网，网络运营商

# 防火墙，缓存服务器

# Web服务器
##### 收到响应
![[Excalidraw/计算机/四大件/计算机网络 Draw.md#^group=Abd79e9Y|600]]
- [ ] 状态码
	![[Excalidraw/计算机/四大件/计算机网络 Draw.md#^group=XPJza8ki|600]]

