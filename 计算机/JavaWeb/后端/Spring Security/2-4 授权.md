
>[!quote] 授权
>授权 是当用户请求一个受保护的资源时，会检查用户是否已登录，以及用户是否具有访问该资源的权限

```mermaid
sequenceDiagram
	participant K AS 客户端
	participant J AS jwt认证过滤器
	participant R AS redis
	participant S AS SecurityContextHolder

	K->>J: 携带token发起请求
	J->>J: 获取，解析token，获取到userId
	J->>R: 携带userId
	R->>J: 返回用户信息
	J->>S: 把用户信息存入到SecurityContextHolder，便于后续的过滤器可以使用用户信息做某些事情
```

---

SpringSecurity 的授权需求主要有两种模式：
- 用户-权限-资源模式：用户直接与权限进行关联，权限再与资源进行关联，适用于权限管理相对较少复杂的系统
- 用户-角色-权限-资源模式：用户首先与角色进行关联，角色再与权限进行关联，权限再与资源进行关联，适用于权限管理较为复杂的系统












