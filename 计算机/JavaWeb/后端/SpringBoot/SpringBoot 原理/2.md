>[!hint] SpringBoot 在启动后，在不同的运行阶段会设置扩展点，可以让我们根据自己的需求在执行过程中，执行自定义的代码

## ApplicationContextInitializer
>[!quote] `ApplicationContext`【应用上下文】
>`ApplicationContext` 是 Spring 核心接口之一，是 Spring 中实现 IOC 和 DI 的容器，<u>用于存储应用程序运行时所需的各种 Bean 对象，并负责实例化，配置，组装这些 Bean</u>【当一个 Bean 需要另一个 Bean 作为依赖时，`ApplicationContext` 就会负责寻找和注入相应的 Bean】

>[!warning] 一旦 `ApplicationContext` 已经刷新，Bean 的定义就不能再被修改了，**但是，你应该尽量避免在运行时修改 Bean 的定义，而是应该在配置阶段就确定好 Bean 的定义**

>[!quote] `ApplicationContextInitializer`
>>`ApplicationContextInitializer` 就是 SpringBoot 众多扩展点中的一个，<u>在 IOC 容器创建完成后</u>， <u>`ApplicationContext` 刷新前</u>【完全初始化 Bean 之前】执行
>
>我们可以利用 `ApplicationContextInitializer` 对上下文环境做一些操作：
>- 运行环境的属性注册
>- 动态改变 Spring 配置属性【修改 Bean 定义】
>- 修改 `ApplicationContext` 的环境属性


`ApplicationContextInitializer` 这个接口通常用于编程式的方式来配置或者修改Spring的应用上下文。

这个机制在编写可插拔的模块或者需要编程式配置的场景中非常有用。例如，你可以创建一个 `ApplicationContextInitializer` 实现类，该类根据某些运行时条件（比如环境变量或者系统属性）动态地添加或者改变某些Bean的定义。这样，你就可以在应用启动时根据实际的运行环境动态地调整应用的配置。

---

当一个Spring应用启动时，所有注册的`ApplicationContextInitializer`实现类都会被调用，并且每个实现类都可以对应用上下文进行自定义的修改或者配置。这种机制非常灵活，可以让我们根据需要进行一些特定的初始化操作，比如添加一些特定的Bean定义，修改一些系统属性，或者应用一些特定的环境配置等。

例如，如果你想在Spring应用启动时动态添加一些Bean，你可以创建一个实现了`ApplicationContextInitializer`接口的类，并在其`initialize`方法中进行添加操作。然后你可以在Spring配置文件中或者通过Spring Boot的`spring.factories`文件来注册这个初始化器。这样，当Spring应用启动时，你的初始化器就会被自动调用，从而完成特定的初始化工作。

---

在Spring项目中，`META-INF/spring.factories`配置文件和`application.yml`配置文件扮演了不同的角色，各有其特定的用途。

1. `META-INF/spring.factories`：这是Spring Boot的一部分，它用于自动配置。Spring Boot在启动时会扫描这个文件，找到所有实现了特定接口或者继承了特定类的配置类，并进行自动配置。在创建自定义starter时，我们通常会在这个文件中添加自己的自动配置类。
    
2. `application.yml`：这是Spring Boot项目的主要配置文件。它包含了对Spring Boot应用程序的各种配置，如服务器端口、数据库连接参数、应用程序的行为等。这个文件通常放在项目的resources目录下，Spring Boot在启动时会自动读取这个文件中的配置。

总的来说，`spring.factories`和`application.yml`都是Spring Boot自动配置的一部分，前者更偏向于框架级别的配置，用于扩展和定制Spring Boot的行为，后者则更偏向于应用级别的配置，用于定制应用程序的行为。