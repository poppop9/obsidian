# 操作系统引论
>操作系统是<u>管理计算机系统硬件，软件资源</u>，<u>合理的对各类作业进行调度</u>，<u>方便用户使用的</u> ***程序的集合***
### 基本特征
- ***并发***：多个活动在给定的时间间隔【==时间段==】中进行
- ***共享***：计算机的资源是被多个进程所共用的
- 异步：进程以不可预知的速度向前推进【A不知道什么时候会被调度】
- 虚拟：把物理上的实体变成逻辑上的对应物

>[!hint] 并发 与 并行
>并行是在同一个时间点上执行多个活动
### 发展
- ***手工操作阶段***【==无操作系统==】
	- 人机速度矛盾
- ***批处理阶段***【==操作系统开始出现==】
	- ***单道批处理阶段***
		- 缓解人机速度矛盾
		- 系统资源利用率依旧很低
	- ***多道批处理阶段***【==操作系统正式诞生==】
		- 资源利用率高
		- 不提供人机交互能力
- ***分时操作系统***
	- 提供人机交互
	- 不能优先处理紧急事务【不能插队】
- ***实时操作系统***【可以插队】
### 两种指令，程序
- 特权指令：不允许用户程序使用，只允许操作系统使用【IO指令，中断指令】
- 非特权指令【普通的运算指令】
---
- 内核程序：可以执行一切指令，运行在***内核态***上
- 应用程序：只能执行非特权指令，运行在***用户态***上

![[Excalidraw/杂/草稿纸 Draw.md#^group=9teYO3aieP3l4HsTksjkX]]
### 其他
原语：是一种原子操作，它是应用程序或进程的最基本的操作单位。原语是不可分割的，要么完全执行，要么不执行
##### 中断和异常
- 内中断
	- 自愿中断
		- 指令中断【需要申请系统资源】
	- 强迫中断
		- 硬件中断
		- 软件中断【0除以0】
- 外中断【外设请求】
##### 系统调用
>系统给程序员提供唯一的接口，可获得OS服务，***在用户态发生，在内核态处理***
# 进程与线程
### 进程
>进程：是系统进行资源分配和调度的***基本单位***
##### 组成
- PCB：保存进程运行期间的数据，是***进程存在的唯一标志***
- 程序段：被调度到CPU的代码
- 数据段：存放数据
##### 🌑进程的状态
- 运行态：进程正在占用CPU
- 就绪态：处于准备运行的状态
- 阻塞态：由于等待某一事件不能享用CPU
- 创建状态：进程正在被创建
- 结束状态：进程正在从系统消失

![[Excalidraw/杂/草稿纸 Draw.md#^group=iKBUfos2|790]]
##### 🌑进程的创建
- ***系统初始化***

开机引导操作系统时，会创建很多前台进程【与用户交互】，后台进程【网络服务，内存交换……】，这些都叫做***守护进程***

- ***派生新进程***

操作系统应一个进程的显式请求而创建新进程

- ***用户请求创建新进程***

为了完成用户的请求，操作系统创建新进程

- ***调度新作业***

操作系统调度某个作业准备运行前，要把它调入内存，创建相应的进程

>[!hint] 创建进程时都要执行创建进程的系统调用【fork()】，主要过程为：
>- 申请一个空闲的PCB【指定进程的标识号】
>- 为新进程分配空间
>- 根据调用者的参数，初始化新进程的PCB，
>- ***将新进程加入为就绪状态***
>
> ```
> int main()
> {
>     int pid;
>     pid = fork();  //创建子进程
>     if(pid < 0)      //创建失败
>     {
>         fprintf(stderr, "Fork Failed"); //输出错误消息
>         return 1;  //退出程序
>     }
>     else if(pid == 0)    //子进程
>     {
>         execlp("/bin/ls", "ls", NULL);  //执行ls命令
>     }
>     else   //父进程
>     {
>         wait(NULL);  //等待子进程结束
>         printf("Child Complete");  
>     }
>     return 0;
> }
> ```
### 线程
>线程：程序执行的最小单位

>[!hint] 程序，进程
>- 程序是有序代码的集合，是静态的
>- 进程是程序的执行，是动态的

# 调度
***按调度层级分：***
- 高级调度【作业调度】
- 中级调度【内存对换】
- 初级调度【进程调度】

***按分类：***
- 抢占式
- 非抢占式

---

- FIFO
- 最短作业优先
- 优先级调度
- 高响应比优先调度
	- 响应比 = (T<sub>等待</sub> + T<sub>需要运行的时间</sub>) / T<sub>需要运行的时间</sub>
	- ==既兼顾了短作业，也兼顾了长作业==
- 轮转
- 多级反馈队列调度







---
未学习：
- 第二章
	- p<sub>43</sub> 进程控制块


















